<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="yarpmanifest.xsl"?>
<application>
  <name>object-tracking-siamese</name>
  <description></description>

  <!-- MODULES -->
  <module>
    <name>object-tracking-siamese</name>
    <parameters></parameters>
    <node>localhost</node>
  </module>

  <module>
    <name>siamese-ground-truth</name>
    <parameters></parameters>
    <node>localhost</node>
  </module>

  <module>
    <name>object-tracking-viewer</name>
    <parameters>--context object-tracking-viewer-realsense</parameters>
    <node>localhost</node>
  </module>

  <module>
    <name>yarpview</name>
    <parameters>--name /object-tracking/viewer/groundTruthImage:i</parameters>
    <node>localhost</node>
    <prefix></prefix>
  </module>

  <module>
    <name>yarpview</name>
    <parameters>--name /object-tracking/viewer/maskImage:i</parameters>
    <node>localhost</node>
    <prefix></prefix>
  </module>

  <module>
    <name>yarpview</name>
    <parameters>--name /object-tracking/viewer/rgbImage:i</parameters>
    <node>localhost</node>
    <prefix></prefix>
  </module>

  <module>
    <name>yarpview</name>
    <parameters>--name /object-tracking/viewer/depthImage:i</parameters>
    <node>localhost</node>
    <prefix></prefix>
  </module>


  <!-- CONNECTIONS -->

  <!-- In case RGB image from realsense is needed... -->
  <!-- <connection> -->
  <!--   <from>/depthCamera/rgbImage:o</from> -->
  <!--   <to></to> -->
  <!--   <protocol>mjpeg</protocol> -->
  <!-- </connection> -->

  <!-- In case depth from realsense is needed... -->
  <!-- <connection> -->
  <!--   <from>/depthCamera/depthImage:o</from> -->
  <!--   <to></to> -->
  <!--   <protocol>tcp</protocol> -->
  <!-- </connection> -->

  <!-- Viewers -->
  <connection>
    <from>/depthCamera/rgbImage:o</from>
    <to>/object-tracking/viewer/rgbImage:i</to>
    <protocol>mjpeg</protocol>
  </connection>

  <connection>
    <from>/siamese-ground-truth/estimateMarkerImage:o</from>
    <to>/object-tracking/viewer/groundTruthImage:i</to>
    <protocol>mjpeg</protocol>
  </connection>

  <connection>
    <from>/instanceSegmenter/maskImage:o</from>
    <to>/object-tracking/viewer/maskImage:i</to>
    <protocol>mjpeg</protocol>
  </connection>

  <!-- Camera to ground-truth module -->
  <connection>
    <from>/depthCamera/rgbImage:o</from>
    <to>/siamese-ground-truth/rgbImage:i</to>
    <protocol>mjpeg</protocol>
  </connection>

  <!-- Ground truth to particle initialization -->
  <connection>
    <from>/siamese-ground-truth/estimate:o</from>
    <to>/siamese/init_particles:i</to>
    <protocol>tcp</protocol>
  </connection>

  <!-- Ground truth to particle initialization for resampling with prior -->
  <connection>
    <from>/siamese-ground-truth/estimate:o</from>
    <to>/resampling-with-prior/init_particles:i</to>
    <protocol>tcp</protocol>
  </connection>

  <!-- Camera to 3D Viewer -->
  <connection>
    <from>/depthCamera/rgbImage:o</from>
    <to>/object-tracking-viewer/rgbImage:i</to>
    <protocol>mjpeg</protocol>
  </connection>

  <!-- Camera depth to 3D Viewer -->
  <connection>
    <from>/depthCamera/depthImage:o</from>
    <to>/object-tracking-viewer/depthImage:i</to>
    <protocol>tcp</protocol>
  </connection>

  <!-- Camera depth to depth dumper -->
  <connection>
    <from>/depthCamera/depthImage:o</from>
    <to>/siamese-ground-truth/dumpDepth:i</to>
    <protocol>tcp</protocol>
  </connection>

  <!-- Ground truth to 3D viewer -->
  <connection>
    <from>/siamese-ground-truth/estimateMarker:o</from>
    <to>/object-tracking-viewer/ground-truth:i</to>
    <protocol>tcp</protocol>
  </connection>

  <!-- Estimate to 3D viewer -->
  <connection>
    <from>/object-tracking-siamese/estimate:o</from>
    <to>/object-tracking-viewer/estimate:i</to>
    <protocol>tcp</protocol>
  </connection>

  <!-- Siamese network to mask reception part  -->
  <connection>
    <from>/instanceSegmenter/maskImage:o</from>
    <to>/siamese/read_masks:i</to>
    <protocol>tcp</protocol>
  </connection>

  <!-- Siamese network to mask reception part  -->
  <connection>
    <from>/depthCamera/depthImage:o</from>
    <to>/siamese/receive_depth:i</to>
    <protocol>tcp</protocol>
  </connection>

  <!-- Camera depth to Viewer -->
  <connection>
    <from>/depthCamera/depthImage:o</from>
    <to>/object-tracking/viewer/depthImage:i</to>
    <protocol>tcp</protocol>
  </connection>


</application>
